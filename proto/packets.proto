syntax = "proto2";

message VersionPacket {
  optional uint32 major_ver = 1;
  optional uint32 minor_ver = 2;
  optional uint32 patch_ver = 3;
  optional uint32 protocol_extension = 4;
}

message LoginPacket {
  optional string user_identifier = 1;
  optional string user_password = 2;
}

message MessagePacket {
  optional string sender_identifier = 1;
  repeated string identifiers = 2;
  optional string channel_id = 3;
  optional string message = 4;
}

enum AffirmationType {
  AFFIRM_LOGIN = 0;
  AFFIRM_MESSAGE = 1;
}

message AffirmPacket { optional AffirmationType type = 1; }

message ErrorPacket { optional string error = 1; }

message UniversalPacket {
  oneof payload {
    VersionPacket version = 1;
    ErrorPacket error = 2;
    LoginPacket login = 3;
    MessagePacket msg = 4;
    AffirmPacket affirm = 5;
  }
}
